                    МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ
   ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ



                           Кафедра Програмної інженерії




                                        Звіт
                              з лабораторної роботи №2
                    з дисципліни: «Скриптові мови програмування»
з теми: «Принципи роботи PHP. Основні синтаксичні конструкції PHP. Дані, їхні
                               типи та робота з ними»




Виконав:                                                              Перевірив:
ст. гр. ПЗПІ-23-3                                   Старший викладач кафедри ПІ
Білоус А. А.                                                       Сокорчук І. П.




                                   Харків – 2025
                                                                                 2
 2 ПРИНЦИПИ РОБОТИ PHP. ОСНОВНІ СИНТАКСИЧНІ КОНСТРУКЦІЇ
                  PHP. ДАНІ, ЇХНІ ТИПИ ТА РОБОТА З НИМИ
       2.1 Постановка задачі

       Лабораторна робота спрямована на розробку консольного PHP-скрипту
«Продовольчий магазин «Весна»».

       2.2 Хід роботи
       2.2.1 Створення файлу скрипту

       Використаємо команду «touch» для створення файлу скрипту:

       touch pzpi-23-3-bilous-anton-task3.php


       Використаємо команду «chmod» для встановлення правильних прав доступу
до скрипту:

       chmod 755 pzpi-23-3-bilous-anton-task3.php


       Тепер файл «pzpi-23-3-bilous-anton-task3.php» може читати та запускати будь-
який користувач, а редагувати тільки його володарь.

       2.2.2 Аналіз завдання

       Програма складається з кількох меню перехід між котрими забезпечує
введення чисел написаних перед варіантами меню.
       Можна виділити такі основні меню:
       –   головне меню;
       –   меню закупок.
       Реалізувати ці меню можна за допомогою «while» циклу.

       2.2.3 Реалізація скрипту

       Спочатку вкажемо інтерпретатор для запуску цього скрипту. В цій роботі це
PHP:

       1 #!/usr/bin/env php
       2 <?php
                                                                                  3
     Після цього встановимо основні параметри:

      4 echo <<< EOF
      5    ################################
      6    # ПРОДОВОЛЬЧИЙ МАГАЗИН "ВЕСНА" #
      7    ################################
      8
      9   EOF;
     10
     11 $main_menu = <<< EOF
     12
     13    1 Вибрати товари
     14    2 Отримати підсумковий рахунок
     15    3 Налаштувати свій профіль
     16    0 Вийти з програми
     17    Введіть команду:
     18   EOF;
     19
     20 $products = [ // [name, price]
     21    ['Молоко пастеризоване', 12],
     22    ['Хліб чорний',           9],
     23    ['Сир білий',             21],
     24    ['Сметана 20%',           25],
     25    ['Кефір 1%',              19],
     26    ['Вода газована',         18],
     27    ['Печиво "Весна"',        14],
     28 ];
     29
     30 $cart = [ /* product id => amount */ ];


     Тут змінна «$products» є масивом який містить масиви з назви продукту та
ціни, а змінна «$cart» буде містити номери придбаних продуктів та їх кількість.
     Для вирівнювання даних створимо функцію «pad», вона буде приймати строку
та бажану довжину, і додавати необхідну кількість пробілів в кінець:

     32 // pad string with spaces at the end to the length
     33 function pad($str, $len) {
     34   return $str . str_repeat(' ', max(0, $len - mb_strlen($str)));
     35 }


     Відображати меню продуктів є досить затратним процесом, тому обчислимо
результат у змінну «$products_menu». Спочатку потрібно знайти найдовшу строку
в назвах продуктів, а потім пронумерувати кожний продукт з вирівнюванням:

     37 $products_menu = PHP_EOL;
     38
     39 $pad_name = 0;
     40 $products_number = 0;
     41 foreach ($products as $product) {
     42   $pad_name = max($pad_name, mb_strlen($product[0]));
                                                                              4
     43   ++$products_number;
     44 }
     45
     46 $pad_name += 2;
     47 $pad_number = strlen($products_number) + 2;
     48
     49 $products_menu .= pad('№', $pad_number) . pad('НАЗВА',
     $pad_name) . 'ЦІНА' . PHP_EOL;
     50 for ($i = 0; $i < $products_number; ++$i) {
     51   $products_menu .= pad($i + 1, $pad_number) . pad($products[$i]
     [0],
     52     $pad_name) . $products[$i][1] . PHP_EOL;
     53 }
     54 $products_menu .= pad('', $pad_number) . '-----------' . PHP_EOL;
     55 $products_menu .= pad('0', $pad_number) . 'ПОВЕРНУТИСЯ' . PHP_EOL;


     Основний цикл програми реалізовано за допомогою простого циклу «while»
та конструкції «switch» котра викликає різні функції в залежності від введеного
числа:

     58 while (true) {
     59   switch (trim(readline($main_menu))) {
     60     case '0': exit(0);
     61     case '1': shop();
     62       break;
     63     case '2': receipt();
     64       break;
     65     case '3': profile();
     66       break;
     67     default: echo 'ПОМИЛКА! Введіть правильну команду', PHP_EOL;
     68   }
     69 }


     Напишемо функцію другого меню shop. Вона теж використовує цикл «while»:

     71 function shop() {
     72   global $products_menu, $products_number, $products, $cart;
     73
     74   while (true) {
     75     echo $products_menu;


     В цьому циклі після виведення меню котре було обчислено на початку
скрипту, потрібно запитати користувача про їх вибір та обробити можливі помилки:

     77      $choice = trim(readline('Виберіть товар: '));
     78      if ($choice == 0) { break; }
     79
     80      if ($choice < 1 || $choice > $products_number) {
     81        echo 'ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ', PHP_EOL;
     82        continue;
                                                                             5
     83     }
     84     --$choice;


     Тепер потрібно запитати користувача про кількість продуктів. Для зручності
обгорнемо цей процес у ще один «while» цикл в якому виводиться обраний продукт,
запитується кількість продуктів, обробляється можлива помилка та в залежності
від кількості та стану кошику продукт буде видалений, доданий або створений у
кошику.

      86      while(true) {
      87        echo PHP_EOL, 'Вибрано: ', $products[$choice][0], PHP_EOL;
      88
      89        $amount = trim(readline('Введіть кількість, штук: '));
      90        if ($amount < 0 || $amount >= 100) {
      91          echo 'ПОМИЛКА! Кількість товару має бути від 1 до 100',
     PHP_EOL;
      92          continue;
      93        }
      94
      95        if ($amount == 0) {
      96          echo 'ВИДАЛЯЮ З КОШИКА', PHP_EOL;
      97          unset($cart[$choice]);
      98        } else if (array_key_exists($choice, $cart)) {
      99          $cart[$choice] += $amount;
     100        } else {
     101          $cart[$choice] = $amount;
     102        }
     103        break;
     104      }


     Після операції над кошиком виведемо його стан. Процес виводу досить
схожий до меню закупок, але кошик є динамічним та має адаптуватись до змін при
кожному виводі, тому обчислення здійснюється кожного разу:

     106     if (empty($cart)) {
     107       echo 'КОШИК ПОРОЖНІЙ', PHP_EOL;
     108       continue;
     109     }
     110     $pad_name = 0;
     111     foreach ($cart as $item => $_) {
     112       $pad_name = max($pad_name, mb_strlen($products[$item][0]));
     113     }
     114     $pad_name += 2;
     115     echo PHP_EOL, pad('НАЗВА', $pad_name), 'КІЛЬКІСТЬ', PHP_EOL;
     116     foreach ($cart as $item => $amount) {
     117       echo pad($products[$item][0], $pad_name), $amount, PHP_EOL;
     118     }
     119   }
     120 }
                                                                             6
      Після закупів клієнт має мати можливість побачити рахунок. Функція
відображення рахунку є комбінацією обчислень відображення меню закупів та
статусу кошику.

      122 function receipt() {
      123   global $products, $cart;
      124
      125   if (empty($cart)) {
      126     echo 'КОШИК ПОРОЖНІЙ', PHP_EOL;
      127     return;
      128   }


      Знайдемо найдовшу назву продукту та підрахуємо кількість продуктів:

      130    $pad_name = 0;
      131    $products_number = 0;
      132    foreach ($cart as $item => $_) {
      133      $pad_name = max($pad_name, mb_strlen($products[$item][0]));
      134      ++$products_number;
      135    }
      136
      137    $pad_name += 2;
      138    $pad_number = strlen($products_number) + 2;


      Роздрукуємо відформатовану таблицю рахунку:

      141   echo PHP_EOL, pad('№', $pad_number), pad('НАЗВА', $pad_name),
      'ЦІНА КІЛЬКІСТЬ ВАРТІСТЬ', PHP_EOL;
      142
      143   $i = 0;
      144   $total = 0;
      145   foreach ($cart as $item => $amount) {
      146     $price = $products[$item][1];
      147     $total += $price * $amount;
      148
      149     echo pad(++$i, $pad_number), pad($products[$item][0],
      $pad_name),
      150     pad($price, 6), pad($amount, 11), $price * $amount, PHP_EOL;
      151   }
      152   echo 'РАЗОМ ДО CПЛАТИ: ', $total, PHP_EOL;
      153 }


      Додамо функцію для створення профілю користувачем. Ім’я має мати хоча б
одну літеру, а вік має бути від 7 до 150 років:

      155 function profile() {
      156   while (!preg_match('/[a-zа-яґїіє]/iu', trim(readline("\nВаше
      імʼя: ")))) { // u for utf8
      157     echo 'ПОМИЛКА! Імʼя користувача не може бути порожнім і
      повинно містити хоча б одну літеру', PHP_EOL;
                                                                           7
     158   }
     159
     160   $age = trim(readline('Ваш вік: '));
     161   while ($age < 7 || $age > 150) {
     162     echo 'ПОМИЛКА! Користувач не може бути молодшим 7-ми або
     старшим 150-ти років', PHP_EOL, PHP_EOL;
     163     $age = trim(readline('Ваш вік: '));
     164   }
     165 }


     2.3 Висновки

     Реалізоване програмне забезпечення відповідає поставленим вимогам до
лабораторної роботи. Було вивчено основні принципи роботи з PHP для написання
консольних програм та проведена оптимізація процесів які можуть впливати на
швидкодію програми.
                                                                              8
                                   ДОДАТОК А
                                     Відеозапис

     Відеозапис презентації результатів лабораторної роботи: https://youtu.be/O-TH29MtolI


Хронологічний опис відеозапису:
     –   00:00 – Вступ та загальний опис роботи;
     –   00:25 – Глобальні змінні;
     –   01:05 – Функція pad();
     –   01:20 – Генерація меню товарів;
     –   02:52 – Обробка вибору в головному меню;
     –   03:11 – Функція купівлі товарів shop();
     –   04:48 – Функція отримання чеку receipt();
     –   05:45 – Функція налаштування профілю profile();
     –   06:52 – Запуск скрипту;
     –   07:42 – Друк рахунку;
     –   08:20 – Налаштування профілю користувача.
                                                                                   9
                                   ДОДАТОК Б
                                  Програмний код

      Б.1 Вміст файлу smp-pzpi-23-3-bilous-anton-lab2-code.php

      GitHub репозиторій: https://github.com/NureBilousAnton/smp-pzpi-23-3-bilous-anton/blob/main/Lab2/smp-pzpi-23-3-bilous-anton-lab2/smp-pzpi-23-3-bilous-anton-lab2-code.php

  1   #!/usr/bin/env php
  2   <?php
  3
  4   echo <<< EOF
  5       ################################
  6       # ПРОДОВОЛЬЧИЙ МАГАЗИН "ВЕСНА" #
  7       ################################
  8
  9       EOF;
 10
 11   $main_menu = <<< EOF
 12
 13       1 Вибрати товари
 14       2 Отримати підсумковий рахунок
 15       3 Налаштувати свій профіль
 16       0 Вийти з програми
 17       Введіть команду:
 18       EOF;
 19
 20   $products = [ // [name, price]
 21       ['Молоко пастеризоване',      12],
 22       ['Хліб чорний',               9],
 23       ['Сир білий',                 21],
 24       ['Сметана 20%',               25],
 25       ['Кефір 1%',                  19],
 26       ['Вода газована',             18],
 27       ['Печиво "Весна"',            14],
 28   ];
 29
 30   $cart = [ /* product id => amount */ ];
 31
 32   // pad string with spaces at the end to the length
 33   function pad($str, $len) {
 34       return $str . str_repeat(' ', max(0, $len - mb_strlen($str)));
 35   }
 36
 37   $products_menu = PHP_EOL;
 38
 39   // find longest product name
 40   $pad_name = 0;
 41   $products_number = 0;
 42   foreach ($products as $product) {
                                                                            10

43       $pad_name = max($pad_name, mb_strlen($product[0]));
44       ++$products_number;
45   }
46
47   $pad_name += 2;
48   $pad_number = strlen($products_number) + 2;
49
50   $products_menu .= pad('№', $pad_number) . pad('НАЗВА', $pad_name) .
     'ЦІНА' . PHP_EOL;
51   for ($i = 0; $i < $products_number; ++$i) {
52       $products_menu .= pad($i + 1, $pad_number) . pad($products[$i][0],
53           $pad_name) . $products[$i][1] . PHP_EOL;
54   }
55   $products_menu .= pad('', $pad_number) . '-----------' . PHP_EOL;
56   $products_menu .= pad('0', $pad_number) . 'ПОВЕРНУТИСЯ' . PHP_EOL;
57
58
59   while (true) {
60       switch (trim(readline($main_menu))) {
61           case '0': exit(0);
62           case '1': shop();
63               break;
64           case '2': receipt();
65               break;
66           case '3': profile();
67               break;
68           default: echo 'ПОМИЛКА! Введіть правильну команду', PHP_EOL;
69       }
70   }
71
72   function shop() {
73       global $products_menu, $products_number, $products, $cart;
74
75       while (true) {
76           echo $products_menu;
77
78              $choice = trim(readline('Виберіть товар: '));
79              if ($choice == 0) { break; }
80
81              if ($choice < 1 || $choice > $products_number) {
82                  echo 'ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ',
     PHP_EOL;
83                  continue;
84              }
85              --$choice;
86
87              while(true) {
88                  echo PHP_EOL, 'Вибрано: ', $products[$choice][0], PHP_EOL;
89
90               $amount = trim(readline('Введіть кількість, штук: '));
91               if ($amount < 0 || $amount >= 100) {
92                   echo 'ПОМИЛКА! Кількість товару має бути від 1 до
     100', PHP_EOL;
93                   continue;
94               }
95
                                                                                11

 96                  if ($amount == 0) {
 97                      echo 'ВИДАЛЯЮ З КОШИКА', PHP_EOL;
 98                      unset($cart[$choice]);
 99                  } else if (array_key_exists($choice, $cart)) {
100                      $cart[$choice] += $amount;
101                  } else {
102                      $cart[$choice] = $amount;
103                  }
104                  break;
105              }
106
107              if (empty($cart)) {
108                  echo 'КОШИК ПОРОЖНІЙ', PHP_EOL;
109                  continue;
110              }
111              $pad_name = 0;
112              foreach ($cart as $item => $_) {
113                  $pad_name = max($pad_name, mb_strlen($products[$item]
      [0]));
114              }
115              $pad_name += 2;
116              echo PHP_EOL, pad('НАЗВА', $pad_name), 'КІЛЬКІСТЬ', PHP_EOL;
117              foreach ($cart as $item => $amount) {
118                  echo pad($products[$item][0], $pad_name), $amount,
      PHP_EOL;
119              }
120       }
121   }
122
123   function receipt() {
124       global $products, $cart;
125
126       if (empty($cart)) {
127           echo 'КОШИК ПОРОЖНІЙ', PHP_EOL;
128           return;
129       }
130
131       $pad_name = 0;
132       $products_number = 0;
133       foreach ($cart as $item => $_) {
134           $pad_name = max($pad_name, mb_strlen($products[$item][0]));
135           ++$products_number;
136       }
137
138       $pad_name += 2;
139       $pad_number = strlen($products_number) + 2;
140
141
142       echo PHP_EOL, pad('№', $pad_number), pad('НАЗВА', $pad_name),
      'ЦІНА КІЛЬКІСТЬ ВАРТІСТЬ', PHP_EOL;
143
144       $i = 0;
145       $total = 0;
146       foreach ($cart as $item => $amount) {
147           $price = $products[$item][1];
148           $total += $price * $amount;
                                                                           12

149
150            echo pad(++$i, $pad_number), pad($products[$item][0],
      $pad_name),
151                pad($price, 6), pad($amount, 11), $price * $amount,
      PHP_EOL;
152       }
153       echo 'РАЗОМ ДО CПЛАТИ: ', $total, PHP_EOL;
154   }
155
156   function profile() {
157       while (!preg_match('/[a-zа-яґїіє]/iu', trim(readline("\nВаше імʼя:
      ")))) { // u for utf8
158           echo 'ПОМИЛКА! Імʼя користувача не може бути порожнім і повинно
      містити хоча б одну літеру', PHP_EOL;
159       }
160
161       $age = trim(readline('Ваш вік: '));
162       while ($age < 7 || $age > 150) {
163           echo 'ПОМИЛКА! Користувач не може бути молодшим 7-ми або
      старшим 150-ти років', PHP_EOL, PHP_EOL;
164           $age = trim(readline('Ваш вік: '));
165       }
166   }
167
                                                        13
                                  ДОДАТОК В
                         Результат виконання програми

 1   > php pzpi-23-3-bilous-anton-task3.php
 2   ################################
 3   # ПРОДОВОЛЬЧИЙ МАГАЗИН "ВЕСНА" #
 4   ################################
 5
 6   1 Вибрати товари
 7   2 Отримати підсумковий рахунок
 8   3 Налаштувати свій профіль
 9   0 Вийти з програми
10   Введіть команду: 1
11
12   №  НАЗВА                   ЦІНА
13   1  Молоко пастеризоване    12
14   2  Хліб чорний             9
15   3  Сир білий               21
16   4  Сметана 20%             25
17   5  Кефір 1%                19
18   6  Вода газована           18
19   7  Печиво "Весна"          14
20      -----------
21   0 ПОВЕРНУТИСЯ
22   Виберіть товар: 1
23
24   Вибрано: Молоко пастеризоване
25   Введіть кількість, штук: 3
26
27   НАЗВА                  КІЛЬКІСТЬ
28   Молоко пастеризоване   3
29
30   №  НАЗВА                   ЦІНА
31   1  Молоко пастеризоване    12
32   2  Хліб чорний             9
33   3  Сир білий               21
34   4  Сметана 20%             25
35   5  Кефір 1%                19
36   6  Вода газована           18
37   7  Печиво "Весна"          14
38      -----------
39   0 ПОВЕРНУТИСЯ
40   Виберіть товар: 2
41
42   Вибрано: Хліб чорний
43   Введіть кількість, штук: 1
44
45   НАЗВА                  КІЛЬКІСТЬ
46   Молоко пастеризоване   3
47   Хліб чорний            1
48
49   №   НАЗВА                  ЦІНА
50   1   Молоко пастеризоване   12
51   2   Хліб чорний            9
52   3   Сир білий              21
                                                               14

 53   4  Сметана 20%             25
 54   5  Кефір 1%                19
 55   6  Вода газована           18
 56   7  Печиво "Весна"          14
 57      -----------
 58   0 ПОВЕРНУТИСЯ
 59   Виберіть товар: 7
 60
 61   Вибрано: Печиво "Весна"
 62   Введіть кількість, штук: 10
 63
 64   НАЗВА                  КІЛЬКІСТЬ
 65   Молоко пастеризоване   3
 66   Хліб чорний            1
 67   Печиво "Весна"         10
 68
 69   №  НАЗВА                   ЦІНА
 70   1  Молоко пастеризоване    12
 71   2  Хліб чорний             9
 72   3  Сир білий               21
 73   4  Сметана 20%             25
 74   5  Кефір 1%                19
 75   6  Вода газована           18
 76   7  Печиво "Весна"          14
 77      -----------
 78   0 ПОВЕРНУТИСЯ
 79   Виберіть товар: 7
 80
 81   Вибрано: Печиво "Весна"
 82   Введіть кількість, штук: 0
 83   ВИДАЛЯЮ З КОШИКА
 84
 85   НАЗВА                  КІЛЬКІСТЬ
 86   Молоко пастеризоване   3
 87   Хліб чорний            1
 88
 89   №  НАЗВА                   ЦІНА
 90   1  Молоко пастеризоване    12
 91   2  Хліб чорний             9
 92   3  Сир білий               21
 93   4  Сметана 20%             25
 94   5  Кефір 1%                19
 95   6  Вода газована           18
 96   7  Печиво "Весна"          14
 97      -----------
 98   0 ПОВЕРНУТИСЯ
 99   Виберіть товар: 0
100
101   1 Вибрати товари
102   2 Отримати підсумковий рахунок
103   3 Налаштувати свій профіль
104   0 Вийти з програми
105   Введіть команду: 2
106
107   №   НАЗВА                  ЦІНА   КІЛЬКІСТЬ   ВАРТІСТЬ
108   1   Молоко пастеризоване   12     3           36
                                                                           15

109   2 Хліб чорний            9       1        9
110   РАЗОМ ДО CПЛАТИ: 45
111
112   1 Вибрати товари
113   2 Отримати підсумковий рахунок
114   3 Налаштувати свій профіль
115   0 Вийти з програми
116   Введіть команду: 3
117
118   Ваше імʼя: 42
119   ПОМИЛКА! Імʼя користувача не може бути порожнім і повинно містити хоча
      б одну літеру
120
121   Ваше імʼя: Ян
122   Ваш вік: 180
123   ПОМИЛКА! Користувач не може бути молодшим 7-ми або старшим 150-ти
      років
124
125   Ваш вік: 18
126
127   1 Вибрати товари
128   2 Отримати підсумковий рахунок
129   3 Налаштувати свій профіль
130   0 Вийти з програми
131   Введіть команду: 0

